<html>
  <head>
    <title>Athena - fREW Schmidt's Notes</title>
    <meta property="og:title" content="Athena" />
    <meta name="twitter:title" content="Athena" />
    <meta name="author" content="Arthur Axel fREW Schmidt"/>
    <link href="/notes/img/fav.png" rel='icon' type='image/x-icon'/>
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@frioux" />
    <meta name="twitter:creator" content="@frioux" />
    <meta property="og:url" content="{ { .URL } }" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="{ { .Site.Title } }" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <link href="/notes/css/bootstrap.min.css" rel="stylesheet"/>
  </head>
  <body>
    <div class="container" id="main">
      <div class="row">
        <div class="col-md-12">
           <h1>Athena</h1>
<h2 id="query-log">Query Log</h2>
<ul>
<li><code>SELECT  record FROM data_unified_impression WHERE log_date IN (20200228 ) AND json_extract(record, '$.data.impression_id') IS NULL</code></li>
</ul>
<h2 id="reference">Reference</h2>
<ul>
<li><code>json_extract_scalar(field, '$.foo[&quot;@bar&quot;]')</code> (always returns string)</li>
<li><code>json_extract(field, '$.baz.biff') IS NULL</code> works if <code>.baz.biff</code> is missing</li>
</ul>
<pre><code>function x(rw, r)
   local a = notes.readarticlefromfs(fss, f)

   local re = regexp.compile(&quot;json&quot;)
   local t = re:findallstringsubmatch(&quot;https?://www.imdb.com[^\s]+&quot;)
   local w = re:replaceallstringfunc(a:rawcontents(), function(s) return &quot;xml&quot; end)

   print(w)
end
</code></pre>
<pre><code>function t(rw, r)
   local re = regexp.compile(&quot;json.*&quot;)
   local t = re:findallstringsubmatch(&quot;herp jsonfrew&quot;, -1)
   print(t[0][0])
end

function y(rw, r)
   -- docstr = http.get(&quot;http://now.frew.co/&quot;)
   -- doc = goquery.newdocumentfromstring(docstr)
   -- print(doc:find(&quot;h2#mothers-day&quot;):text())
end
</code></pre>
</div>
</div>
</div>
<div class="container">
<hr>
<footer id="footer">
<p class="pull-right"><a href="#top">Back to top</a></p>
<ul>
<li><a href="/notes/tags/public">public</a></li>
<li><a href="/notes/tags/reference">reference</a></li>
<li><a href="/notes/tags">all tags</a></li>
</ul>
</footer>
</div>
  </body>
</html>
